"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2567],{82567:function(t,a,e){e.r(a),e.d(a,{default:function(){return u}});var s=e(98818),r={props:["getStatus"],data(){return{loading:!1,total_count:0,cardList:[],params:{card_id:0,page:1,pageSize:20}}},watch:{getStatus(t){t&&this.getCardUserList()}},mounted(){this.$route.query.cardId&&(this.params.card_id=this.$route.query.cardId)},methods:{handleCurrentChange(t){this.params.page=t,this.getCardUserList()},handleSizeChange(t){this.params.page=1,this.params.pageSize=t,this.getCardUserList()},getCardUserList(){this.loading=!0,(0,s.getCardUserList)(this.params).then(t=>{t.data.data.list.length>0?(this.cardList=t.data.data.list,this.total_count=t.data.data.count,this.loading=!1):(this.cardList=[],this.loading=!1)}).catch(t=>{this.loading=!1})}}},i=e(81656),n=(0,i.A)(r,function(){var t=this,a=t._self._c;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.cardList,border:"",height:"600"}},[a("el-table-column",{attrs:{prop:"username",label:$t("f6rb5l4","用户名字","lang")}}),a("el-table-column",{attrs:{prop:"mobile",label:$t("ewbd43","手机号","lang")}}),a("el-table-column",{attrs:{label:$t("jlc24u4","领取时间","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["0"!=e.row.get_date?a("span",[t._v(t._s(t._f("datetime")(e.row.get_date,"YYYY-MM-DD HH:mm:ss")))]):a("span",[t._v($t("j8ren3","老数据","lang"))])]}}])}),a("el-table-column",{attrs:{prop:"source_type",label:$t("di9r3v4","来源类型","lang")}})],1),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":t.params.page,"page-sizes":[10,20,50],total:t.total_count,"page-size":t.params.pageSize},on:{"update:currentPage":function(a){return t.$set(t.params,"page",a)},"update:current-page":function(a){return t.$set(t.params,"page",a)},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)},[],!1,null,"15d831cc",null).exports,l={props:["getStatus"],data(){return{loading:!1,total_count:0,cardList:[],params:{card_id:0,is_use:!0,page:1,pageSize:20}}},watch:{getStatus(t){t&&this.getCardUserList()}},mounted(){this.$route.query.cardId&&(this.params.card_id=this.$route.query.cardId)},methods:{handleCurrentChange(t){this.params.page=t,this.getCardUserList()},handleSizeChange(t){this.params.page=1,this.params.pageSize=t,this.getCardUserList()},getCardUserList(){this.loading=!0,(0,s.getCardUserList)(this.params).then(t=>{t.data.data.list.length>0?(this.cardList=t.data.data.list,this.total_count=t.data.data.total_count,this.loading=!1):(this.cardList=[],this.loading=!1)}).catch(t=>{this.loading=!1})}}},d={components:{receive:n,used:(0,i.A)(l,function(){var t=this,a=t._self._c;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.cardList,border:"",height:"600"}},[a("el-table-column",{attrs:{prop:"code",label:$t("adqb2p4","优惠券码","lang"),width:"120"}}),a("el-table-column",{attrs:{prop:"username",label:$t("f6rb5l4","用户名字","lang"),width:"150"}}),a("el-table-column",{attrs:{prop:"mobile",label:$t("ewbd43","手机号","lang"),width:"120"}}),a("el-table-column",{attrs:{prop:"used_status",label:$t("d20m734","操作途径","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return["callback"==a.row.used_status?[t._v($t("dyz4u4"," 回退 ","lang"))]:[t._v($t("gjbjs4"," 核销 ","lang"))]]}}])}),a("el-table-column",{attrs:{prop:"used_time",label:$t("i0qhib4","记录时间","lang"),width:"170"}}),a("el-table-column",{attrs:{prop:"shop_name",label:$t("drriwn4","核销门店","lang")}})],1),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":t.params.page,"page-sizes":[10,20,50],total:t.total_count,"page-size":t.params.pageSize},on:{"update:currentPage":function(a){return t.$set(t.params,"page",a)},"update:current-page":function(a){return t.$set(t.params,"page",a)},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)},[],!1,null,"6144760a",null).exports},data(){return{title:"",activeName:"first",receive:!1,used:!1}},mounted(){this.$route.query.name&&(this.activeName=this.$route.query.name),this.$route.query.title&&(this.title=this.$route.query.title),"first"===this.activeName?this.receive=!0:"second"===this.activeName&&(this.used=!0)},methods:{handleClick(t,a){"first"===this.activeName?this.receive=!0:"second"===this.activeName&&(this.used=!0)}}},u=(0,i.A)(d,function(){var t=this,a=t._self._c;return a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.title+$t("r1kxi17","-卡券领取记录","lang"),name:"first"}},[a("receive",{attrs:{"get-status":t.receive}})],1),a("el-tab-pane",{attrs:{label:t.title+$t("hyvetu7","-卡券使用记录","lang"),name:"second"}},[a("used",{attrs:{"get-status":t.used}})],1)],1)},[],!1,null,"14877a7d",null).exports}}]);